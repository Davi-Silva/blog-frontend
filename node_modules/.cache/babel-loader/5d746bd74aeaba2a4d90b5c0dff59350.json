{"ast":null,"code":"var _jsxFileName = \"/home/davi/Documents/Dev/course/frontend/src/pages/UploadNewPodcast.jsx\";\nimport React, { Component } from \"react\"; // import debounce from \"lodash/debounce\";\n\nimport { Input, TextArea, Button } from \"../styled-components/forms.styled-components\";\nexport default class UploadNewPodcast extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      slug: \"\",\n      category: \"\",\n      title: \"\",\n      description: \"\",\n      tags: \"\",\n      isSlugValid: true,\n      uploaded: null\n    };\n    this.verifySlug = this.verifySlug.bind(this);\n    this.onChangeTitle = this.onChangeTitle.bind(this);\n    this.changeSlugFromTitle = this.changeSlugFromTitle.bind(this);\n    this.onChangeCategory = this.onChangeCategory.bind(this);\n    this.onChangeDescription = this.onChangeDescription.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onChangeTags = this.onChangeTags.bind(this);\n  }\n\n  async verifySlug(slug) {\n    let response = await fetch( // `https://course-backend.herokuapp.com/podcasts/get/${}`,\n    \"http://localhost:5000/podcasts/validation/slug/\".concat(slug), {\n      method: \"GET\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    let data = await response.json();\n    return data;\n  }\n\n  async uploadPodcast(podcast) {\n    let response = await fetch( // `https://course-backend.herokuapp.com/podcasts/get/${}`,\n    \"http://localhost:5000/podcasts/upload\", {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(podcast)\n    });\n    let data = await response.json();\n    return data;\n  }\n\n  setStateAsync(state) {\n    return new Promise(resolve => {\n      this.setState(state, resolve);\n    });\n  }\n\n  async onChangeTitle(e) {\n    this.setStateAsync({\n      title: e.target.value\n    });\n    setTimeout(() => {\n      this.changeSlugFromTitle(this.state.title);\n    }, 0);\n  }\n\n  async changeSlugFromTitle() {\n    let slug = this.state.title.toLowerCase().split(\" \").join(\"-\");\n    await this.setStateAsync({\n      slug\n    });\n  }\n\n  async onChangeCategory(e) {\n    this.setStateAsync({\n      category: e.target.value\n    });\n  }\n\n  async onChangeDescription(e) {\n    this.setStateAsync({\n      description: e.target.value\n    });\n  }\n\n  async onChangeTags(e) {\n    this.setStateAsync({\n      tags: e.target.value\n    });\n  }\n\n  async onSubmit(e) {\n    e.preventDefault();\n    const podcast_info = {\n      isSlugValid: this.state.isSlugValid,\n      category: this.state.category,\n      title: this.state.title,\n      description: this.state.description,\n      tags: this.state.tags\n    };\n    let isSlugValidRes = await this.verifySlug(this.state.slug);\n    console.log(\"isSlugValidRes:\", isSlugValidRes);\n\n    if (isSlugValidRes.valid) {\n      let res = await this.uploadPodcast(podcast_info);\n      this.setStateAsync({\n        uploaded: res.uploaded\n      });\n      console.log(res);\n    } else {\n      console.log(\"Slug is invalid\");\n    }\n  }\n\n  async componentDidUpdate() {\n    if (this.state.uploaded) {\n      console.log(\"Podcast Uploaded\");\n    }\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        margin: \"35px auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      className: \"text-center\",\n      style: {\n        fontSize: \"14px\",\n        color: \"#999\",\n        fontWeight: \"900\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"UPLOAD NEW PODCAST\"))), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      method: \"POST\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-6 col-12\",\n      style: {\n        paddingRight: \"3px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      id: \"title\",\n      name: \"title\",\n      placeholder: \"Title\",\n      value: this.state.title,\n      onChange: this.onChangeTitle,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-6 col-12\",\n      style: {\n        paddingLeft: \"3px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      id: \"Slug\",\n      name: \"slug\",\n      placeholder: \"Slug\",\n      value: this.state.slug // onChange={this.onChangeTitle}\n      ,\n      disabled: true,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-6 col-12\",\n      style: {\n        paddingRight: \"3px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      id: \"category\",\n      name: \"category\",\n      placeholder: \"Category\",\n      value: this.state.category,\n      onChange: this.onChangeCategory,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-6 col-md-6 col-sm-6 col-12\",\n      style: {\n        paddingLeft: \"3px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      id: \"tags\",\n      name: \"tags\",\n      placeholder: \"Tags\",\n      value: this.state.tags,\n      onChange: this.onChangeTags,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(TextArea, {\n      id: \"description\",\n      name: \"description\",\n      placeholder: \"Description\",\n      value: this.state.description,\n      onChange: this.onChangeDescription,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"file\",\n      id: \"audio_file\",\n      name: \"audio_file\",\n      placeholder: \"Audio File\",\n      style: {\n        margin: \"-4px auto 5px auto\"\n      },\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, \"Upload\"))))));\n  }\n\n}","map":{"version":3,"sources":["/home/davi/Documents/Dev/course/frontend/src/pages/UploadNewPodcast.jsx"],"names":["React","Component","Input","TextArea","Button","UploadNewPodcast","constructor","props","state","id","slug","category","title","description","tags","isSlugValid","uploaded","verifySlug","bind","onChangeTitle","changeSlugFromTitle","onChangeCategory","onChangeDescription","onSubmit","onChangeTags","response","fetch","method","mode","cache","credentials","headers","data","json","uploadPodcast","podcast","body","JSON","stringify","setStateAsync","Promise","resolve","setState","e","target","value","setTimeout","toLowerCase","split","join","preventDefault","podcast_info","isSlugValidRes","console","log","valid","res","componentDidUpdate","render","margin","fontSize","color","fontWeight","paddingRight","paddingLeft"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\n// import debounce from \"lodash/debounce\";\n\nimport {\n  Input,\n  TextArea,\n  Button\n} from \"../styled-components/forms.styled-components\";\n\nexport default class UploadNewPodcast extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      slug: \"\",\n      category: \"\",\n      title: \"\",\n      description: \"\",\n      tags: \"\",\n      isSlugValid: true,\n      uploaded: null\n    };\n    this.verifySlug = this.verifySlug.bind(this);\n    this.onChangeTitle = this.onChangeTitle.bind(this);\n    this.changeSlugFromTitle = this.changeSlugFromTitle.bind(this);\n    this.onChangeCategory = this.onChangeCategory.bind(this);\n    this.onChangeDescription = this.onChangeDescription.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onChangeTags = this.onChangeTags.bind(this);\n  }\n\n  async verifySlug(slug) {\n    let response = await fetch(\n      // `https://course-backend.herokuapp.com/podcasts/get/${}`,\n      `http://localhost:5000/podcasts/validation/slug/${slug}`,\n      {\n        method: \"GET\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        credentials: \"same-origin\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }\n    );\n    let data = await response.json();\n    return data;\n  }\n\n  async uploadPodcast(podcast) {\n    let response = await fetch(\n      // `https://course-backend.herokuapp.com/podcasts/get/${}`,\n      \"http://localhost:5000/podcasts/upload\",\n      {\n        method: \"POST\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        credentials: \"same-origin\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(podcast)\n      }\n    );\n    let data = await response.json();\n    return data;\n  }\n\n  setStateAsync(state) {\n    return new Promise(resolve => {\n      this.setState(state, resolve);\n    });\n  }\n\n  async onChangeTitle(e) {\n    this.setStateAsync({\n      title: e.target.value\n    });\n    setTimeout(() => {\n      this.changeSlugFromTitle(this.state.title);\n    }, 0);\n  }\n\n  async changeSlugFromTitle() {\n    let slug = this.state.title\n      .toLowerCase()\n      .split(\" \")\n      .join(\"-\");\n    await this.setStateAsync({ slug });\n  }\n\n  async onChangeCategory(e) {\n    this.setStateAsync({\n      category: e.target.value\n    });\n  }\n\n  async onChangeDescription(e) {\n    this.setStateAsync({\n      description: e.target.value\n    });\n  }\n\n  async onChangeTags(e) {\n    this.setStateAsync({\n      tags: e.target.value\n    });\n  }\n\n  async onSubmit(e) {\n    e.preventDefault();\n    const podcast_info = {\n      isSlugValid: this.state.isSlugValid,\n      category: this.state.category,\n      title: this.state.title,\n      description: this.state.description,\n      tags: this.state.tags\n    };\n    let isSlugValidRes = await this.verifySlug(this.state.slug);\n    console.log(\"isSlugValidRes:\", isSlugValidRes);\n    if (isSlugValidRes.valid) {\n      let res = await this.uploadPodcast(podcast_info);\n      this.setStateAsync({\n        uploaded: res.uploaded\n      });\n      console.log(res);\n    } else {\n      console.log(\"Slug is invalid\");\n    }\n  }\n\n  async componentDidUpdate() {\n    if (this.state.uploaded) {\n      console.log(\"Podcast Uploaded\");\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"container\" style={{ margin: \"35px auto\" }}>\n          <div className=\"row\">\n            <div className=\"col-12\">\n              <h6\n                className=\"text-center\"\n                style={{ fontSize: \"14px\", color: \"#999\", fontWeight: \"900\" }}\n              >\n                UPLOAD NEW PODCAST\n              </h6>\n            </div>\n          </div>\n          <form onSubmit={this.onSubmit} method=\"POST\">\n            <div className=\"row\">\n              <div\n                className=\"col-lg-6 col-md-6 col-sm-6 col-12\"\n                style={{ paddingRight: \"3px\" }}\n              >\n                <Input\n                  type=\"text\"\n                  id=\"title\"\n                  name=\"title\"\n                  placeholder=\"Title\"\n                  value={this.state.title}\n                  onChange={this.onChangeTitle}\n                  required\n                />\n              </div>\n              <div\n                className=\"col-lg-6 col-md-6 col-sm-6 col-12\"\n                style={{ paddingLeft: \"3px\" }}\n              >\n                <Input\n                  type=\"text\"\n                  id=\"Slug\"\n                  name=\"slug\"\n                  placeholder=\"Slug\"\n                  value={this.state.slug}\n                  // onChange={this.onChangeTitle}\n                  disabled\n                  required\n                />\n              </div>\n              <div\n                className=\"col-lg-6 col-md-6 col-sm-6 col-12\"\n                style={{ paddingRight: \"3px\" }}\n              >\n                <Input\n                  type=\"text\"\n                  id=\"category\"\n                  name=\"category\"\n                  placeholder=\"Category\"\n                  value={this.state.category}\n                  onChange={this.onChangeCategory}\n                  required\n                />\n              </div>\n              <div\n                className=\"col-lg-6 col-md-6 col-sm-6 col-12\"\n                style={{ paddingLeft: \"3px\" }}\n              >\n                <Input\n                  type=\"text\"\n                  id=\"tags\"\n                  name=\"tags\"\n                  placeholder=\"Tags\"\n                  value={this.state.tags}\n                  onChange={this.onChangeTags}\n                  required\n                />\n              </div>\n              <div className=\"col-12\">\n                <TextArea\n                  id=\"description\"\n                  name=\"description\"\n                  placeholder=\"Description\"\n                  value={this.state.description}\n                  onChange={this.onChangeDescription}\n                  required\n                />\n              </div>\n              <div className=\"col-12\">\n                <Input\n                  type=\"file\"\n                  id=\"audio_file\"\n                  name=\"audio_file\"\n                  placeholder=\"Audio File\"\n                  style={{ margin: \"-4px auto 5px auto\" }}\n                  required\n                />\n              </div>\n              <div className=\"col-12\">\n                <Button>Upload</Button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}